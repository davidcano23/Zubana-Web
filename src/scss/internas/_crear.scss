@use 'base/variables' as v;
@use 'base/mixins' as m;

/* ================================================================
   FORMULARIOS V2 ‚Äì Studio grade
================================================================ */

.crear {
  *, *::before, *::after { box-sizing: border-box; }

  /* T√≠tulo principal */
  h1 {
    color: v.$rojotierra;
    font-family: v.$secundaria;
    text-transform: uppercase;
    font-weight: v.$regular;
    font-size: clamp(2.8rem, 2.2vw + 1.2rem, 4.2rem);
    letter-spacing: .02em;
    margin: 0 0 1.2rem 0;
  }

  /* Botones base */
  .bt-regresar { 
    @include m.boton(v.$rojotierra, v.$rojo, flex); 
    margin: 0 0 2.2rem 0; 
  }
  
  .boton-verde { 
    @include m.boton(v.$verdeesmeralda, v.$verdepastel, flex); 
    margin-top: 2rem; 
    padding-inline: 3rem; 
    border-radius: 1.1rem; 
    font-size: 1.6rem; 
  }

  /* Card del formulario */
  .formulario {
    max-width: 1120px;
    margin-inline: auto;
    padding: clamp(1.6rem, 1.2vw + 1rem, 2.6rem);
    background: color-mix(in srgb, v.$grisgrafito 92%, black);
    border: 1px solid color-mix(in srgb, v.$arenaclaro 18%, transparent);
    border-radius: 18px;
    box-shadow: 0 16px 36px -24px rgba(0,0,0,.72);
    display: grid;
    gap: 2.4rem;
  }

  /* Tarjetas de secci√≥n */
  fieldset {
    margin: 0;
    background: color-mix(in srgb, v.$grisgrafito 96%, black);
    border: 1px solid color-mix(in srgb, v.$arenaclaro 14%, transparent);
    border-radius: 16px;
    padding: clamp(1.4rem, .9vw + .9rem, 2.2rem);

    /* üî• SOLUCI√ìN DEL RESPONSIVE EN M√ìVIL */
    min-width: 0;       /* Permite que el contenedor se encoja */
    width: 100%;        /* Asegura que no exceda el padre */

    /* üí° Grid 2C */
    display: grid;
    grid-template-columns: repeat(2, minmax(260px, 1fr));
    gap: 1.2rem 2rem;

    /* Breakpoints: una columna en pantallas estrechas */
    @media (max-width: 820px) { 
        grid-template-columns: 100%; 
    }
  }

  /* Encabezado de secci√≥n */
  legend {
    grid-column: 1 / -1;
    padding: 0 .4rem;
    margin-bottom: .6rem;
    color: v.$arenaclaro;
    font-family: v.$texto;
    font-weight: v.$regular;
    text-transform: uppercase;
    font-size: clamp(1.6rem, .6vw + 1.1rem, 2.1rem);
    letter-spacing: .06em;
    position: relative;

    &::after {
      content: "";
      display: block;
      height: 2px; width: 72px; margin-top: .7rem;
      background: v.$rojotierra;
      border-radius: 2px;
    }
  }

  /* Alertas */
  .alerta.error {
    background: color-mix(in srgb, v.$rojo 18%, transparent);
    border: 1px solid color-mix(in srgb, v.$rojo 40%, transparent);
    color: color-mix(in srgb, white 94%, v.$rojo 6%);
    padding: .9rem 1.2rem;
    border-radius: 12px;
    font-size: 1.45rem;
    line-height: 1.45;
    margin: 1rem auto;
    text-align: left;
  }

  /* Etiquetas */
  label {
    display: block;
    color: color-mix(in srgb, v.$arenaclaro 96%, white 4%);
    font-size: 1.42rem;
    letter-spacing: .01em;
    margin: .2rem 0 0;

    &:has(+ input:focus),
    &:has(+ select:focus),
    &:has(+ textarea:focus) {
      color: v.$rojotierra;
      text-shadow: 0 0 0 transparent;
    }
  }

  /* Campos base */
  input[type="text"],
  input[type="number"],
  input[type="tel"],
  select,
  .select-estilizado,
  textarea {
    width: 100%;
    appearance: none;
    font-family: v.$texto;
    font-size: 1.6rem;
    color: v.$arenaclaro;
    background: color-mix(in srgb, v.$grisgrafito 90%, black);
    border: 1.5px solid color-mix(in srgb, v.$arenaclaro 24%, transparent);
    border-radius: 12px;
    padding: 1.05rem 1.3rem;
    transition: border-color .18s ease, box-shadow .18s ease, background .18s ease, transform .06s ease;
  }

  /* Altura coherente */
  input[type="text"],
  input[type="number"],
  input[type="tel"],
  select,
  .select-estilizado { height: 48px; line-height: 1; }

  /* Placeholder */
  ::placeholder { color: color-mix(in srgb, v.$arenaclaro 46%, transparent); }

  /* Focus */
  input:focus,
  select:focus,
  .select-estilizado:focus,
  textarea:focus {
    outline: none;
    border-color: v.$rojotierra;
    box-shadow: 0 0 0 .24rem color-mix(in srgb, v.$rojotierra 26%, transparent);
    background: color-mix(in srgb, v.$grisgrafito 96%, black);
  }

  /* Hover */
  input:hover,
  select:hover,
  .select-estilizado:hover,
  textarea:hover {
    border-color: color-mix(in srgb, v.$arenaclaro 36%, transparent);
  }

  /* Full width elements */
  textarea,
  .custom-file-label,
  .imagen-peque { grid-column: 1 / -1; }
  textarea { min-height: 14rem; resize: vertical; }

  /* Select */
  .select-estilizado {
    background-image: url("data:image/svg+xml,%3Csvg width='18' height='18' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M7 10l5 5 5-5' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 1.1rem center;
    background-size: 1.1rem;
    padding-right: 3.2rem;

    option {
      background: color-mix(in srgb, v.$grisgrafito 98%, black);
      color: v.$arenaclaro;
    }
  }

  /* Input file */
  .custom-file-input { display: none; }

  .custom-file-label {
    display: inline-flex;
    align-items: center; gap: .8rem;
    padding: .95rem 1.3rem;
    border-radius: 12px;
    cursor: pointer;
    border: 1.5px dashed color-mix(in srgb, v.$arenaclaro 28%, transparent);
    color: v.$arenaclaro;
    background: color-mix(in srgb, v.$grisgrafito 98%, black);
    transition: border-color .18s ease, background .18s ease, transform .06s ease;

    &:hover { 
      border-color: color-mix(in srgb, v.$arenaclaro 44%, transparent); 
      background: color-mix(in srgb, v.$grisgrafito 99%, black); 
      transform: translateY(-1px); 
    }

    &::before {
      content: ""; inline-size: 1.1rem; block-size: 1.1rem;
      background: v.$arenaclaro; border-radius: 3px;
      clip-path: polygon(50% 0%, 100% 40%, 100% 100%, 0 100%, 0 40%);
      opacity: .75;
    }
  }

  /* Preview imagen */
  .imagen-peque {
    width: min(26rem, 100%);
    aspect-ratio: 4 / 3; object-fit: cover;
    border-radius: 10px;
    border: 1px solid color-mix(in srgb, v.$arenaclaro 18%, transparent);
    box-shadow: 0 10px 22px -16px rgba(0,0,0,.65);
    margin-top: .6rem;
  }

  /* Espaciado label */
  fieldset > label + * { margin-top: .4rem; }
  fieldset > * + label { margin-top: .4rem; }

  /* Disabled */
  select:disabled, input:disabled, textarea:disabled { opacity: .65; cursor: not-allowed; }

  /* √çconos Inputs */
  #precio { padding-left: 2.6rem; background: url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='1.6' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12 1v22M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6' stroke-opacity='.7'/%3E%3C/svg%3E") no-repeat 10px center / 16px auto; }

  #ubicacion { padding-left: 2.6rem; background: url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='1.6' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12 21s7-6.4 7-11a7 7 0 1 0-14 0c0 4.6 7 11 7 11Z' stroke-opacity='.7'/%3E%3Ccircle cx='12' cy='10' r='2.5' fill='white' fill-opacity='.35'/%3E%3C/svg%3E") no-repeat 10px center / 16px auto; }

  #direccion { padding-left: 2.6rem; background: url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='1.6' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M3 21h18M6 21V8l6-4 6 4v13' stroke-opacity='.7'/%3E%3C/svg%3E") no-repeat 10px center / 16px auto; }

  #barrio { padding-left: 2.6rem; background: url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='1.6' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M4 21V8l8-5 8 5v13' stroke-opacity='.7'/%3E%3C/svg%3E") no-repeat 10px center / 16px auto; }

  #propietario { padding-left: 2.6rem; background: url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='1.6' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='12' cy='8' r='3.2' stroke-opacity='.7'/%3E%3Cpath d='M4 20a8 8 0 0 1 16 0' stroke-opacity='.7'/%3E%3C/svg%3E") no-repeat 10px center / 16px auto; }

  #contacto { padding-left: 2.6rem; background: url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='1.6' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M22 16.92v2a2 2 0 0 1-2.18 2 19.8 19.8 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6A19.8 19.8 0 0 1 2.1 4.18 2 2 0 0 1 4.1 2h2a2 2 0 0 1 2 1.72c.12.9.31 1.78.57 2.63a2 2 0 0 1-.45 2.11L7.1 9.91a16 16 0 0 0 6 6l1.45-1.11a2 2 0 0 1 2.11-.45c.85.26 1.73.45 2.63.57A2 2 0 0 1 22 16.92Z' stroke-opacity='.7'/%3E%3C/svg%3E") no-repeat 10px center / 16px auto; }

} /* Cierre final de .crear */

/* Overlay de carga universal */
.ui-loading-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.45);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 999999;
}

.ui-loading-overlay.is-active {
  display: flex;
}

.ui-loading-card {
  background: rgba(255,255,255,0.95);
  border-radius: 14px;
  padding: 18px 22px;
  display: flex;
  gap: 12px;
  align-items: center;
  box-shadow: 0 18px 50px rgba(0,0,0,0.25);
  max-width: 92vw;
}

.ui-loading-spinner {
  width: 22px;
  height: 22px;
  border: 3px solid rgba(0,0,0,0.2);
  border-top-color: rgba(0,0,0,0.75);
  border-radius: 50%;
  animation: ui-spin 0.9s linear infinite;
}

@keyframes ui-spin {
  to { transform: rotate(360deg); }
}

.ui-loading-text {
  font-size: 14px;
  color: #111;
}
